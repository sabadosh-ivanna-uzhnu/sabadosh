extends layout

block content
  h1= title

  if bookinstance_list.length
    ul
      each val in bookinstance_list
        li
          a(href=val.url) #{val.book.title} : #{val.imprint} -&nbsp;
          if val.status == 'Available'
            span.text-success #{val.status}
          else if val.status == 'Maintenance'
            span.text-danger #{val.status}
          else
            span.text-warning #{val.status}
          if val.status != 'Available'
            // span (Due: #{val.due_back} )
            span (Due: #{val.due_back_formatted} )

          // Add a form to update the status
          form(method='POST' action='/catalog/bookinstance/' + val._id + '/update-status')
            select(name='status')
              option(value='Available' selected=val.status == 'Available') Available
              option(value='Checked Out' selected=val.status == 'Checked Out') Checked Out
              option(value='Maintenance' selected=val.status == 'Maintenance') Maintenance
            button(type='submit') Update Status

  else
    p There are no book copies in this library.
